
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://norsk-gjeldsinformasjon.github.io/api-docs/reference/consent/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../openapi/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.12">
    
    
      
        <title>Consent reference - Developer Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fetching-debt-information-with-consents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Developer Docs" class="md-header__button md-logo" aria-label="Developer Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Developer Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Consent reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/norsk-gjeldsinformasjon/api-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    api-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Developer Docs" class="md-nav__button md-logo" aria-label="Developer Docs" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Developer Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/norsk-gjeldsinformasjon/api-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    api-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-to
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How-to
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/choose_integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Choose integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/consent_authorize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authorize
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/lookup-consent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Look up debt with consent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/events-consent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get notified about changes to consents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/recieve_quarterly_debt-reports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get sent quarterly debt reports regarding own customers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Consent reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Consent reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      1 - Getting started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 - Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 - Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 - Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-testing" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 - Testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      2 - Core concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 - Core concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-oauth-20" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 - OAuth 2.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 - Access token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-flows" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 - Flows
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 - Flows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-authorization-code-flow" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 Authorization Code Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-client-credentials-flow" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 Client Credentials Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-scopes" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 - Scopes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-consents-with-an-extended-duration" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 - Consents with an extended duration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-consents-created-and-managed-outside-nogi-eg-in-an-online-bank" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 - Consents created and managed outside NoGi (e.g. in an online bank)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.6 - Consents created and managed outside NoGi (e.g. in an online bank)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Example implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-integration" class="md-nav__link">
    <span class="md-ellipsis">
      3 - Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 - Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-base-urls" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 - Base Urls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-well-knownopenid-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 - /.well-known/openid-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-oauth2auth" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 - /oauth2/auth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-token" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 - /token
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 - /token">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.1 - Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-authorization-code-flow" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.2 - Authorization Code Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343-client-credentials-flow" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.3 - Client Credentials Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-collect-debt-info-api" class="md-nav__link">
    <span class="md-ellipsis">
      4 - Collect Debt Info API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-read-updates-about-consents" class="md-nav__link">
    <span class="md-ellipsis">
      5 - Read updates about consents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 - Read updates about consents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-example-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Example implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Explanations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Explanations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Explanations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/consent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/consume-events-feed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consuming event feeds
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      1 - Getting started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 - Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 - Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 - Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-testing" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 - Testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      2 - Core concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 - Core concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-oauth-20" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 - OAuth 2.0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-access-token" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 - Access token
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-flows" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 - Flows
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 - Flows">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-authorization-code-flow" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 Authorization Code Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-client-credentials-flow" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 Client Credentials Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-scopes" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 - Scopes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-consents-with-an-extended-duration" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 - Consents with an extended duration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-consents-created-and-managed-outside-nogi-eg-in-an-online-bank" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 - Consents created and managed outside NoGi (e.g. in an online bank)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.6 - Consents created and managed outside NoGi (e.g. in an online bank)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Example implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-integration" class="md-nav__link">
    <span class="md-ellipsis">
      3 - Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 - Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-base-urls" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 - Base Urls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-well-knownopenid-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 - /.well-known/openid-configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-oauth2auth" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 - /oauth2/auth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-token" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 - /token
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 - /token">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.1 - Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-authorization-code-flow" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.2 - Authorization Code Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#343-client-credentials-flow" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.3 - Client Credentials Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-collect-debt-info-api" class="md-nav__link">
    <span class="md-ellipsis">
      4 - Collect Debt Info API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-read-updates-about-consents" class="md-nav__link">
    <span class="md-ellipsis">
      5 - Read updates about consents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 - Read updates about consents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-example-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Example implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="fetching-debt-information-with-consents">Fetching debt information with consents</h1>
<p>This service lets you:</p>
<ul>
<li>Ask user for consent to share unsecured debt information</li>
<li>Fetch information about a consumers unsecured debt based on that consent</li>
</ul>
<p>It uses a redirect-based flow which adheres to the common OAuth2.0 and OpenID Connect standards.</p>
<p>The debt info is delivered on the same format as our debt query API, but since it is provided with
the end users consent, we also include the name of the creditors.</p>
<h2 id="1-getting-started">1 - Getting started</h2>
<h3 id="11-introduction">1.1 - Introduction</h3>
<p><img alt="Overview of the consent service major components!" src="../assets/ConsentOverview.png" title="Consent overview" /></p>
<h3 id="12-requirements">1.2 - Requirements</h3>
<p>Before you can start using this service you have to enter into an agreement with Norsk
Gjeldsinfomasjon, this is handled by emailing us
at <a href="mailto:support@norskgjeld.no">support@norskgjeld.no</a>.</p>
<p>When you have signed an agreement, we will send your client id and client secret. You must provide
us with the URLs where you want to receive the callback after the consent flow finishes. This is not required if you
only intend to manage consents externally (<a href="#26-consents-created-and-managed-outside-nogi-eg-in-an-online-bank">see section 2.6</a>)</p>
<p>This service does not require 2-way TLS, so client certificates (Virksomhetssertifikat, SEID) are 
<strong>not</strong> required.</p>
<p>If you plan to run from a provider where you share multiple outbound IP-addresses (eg. cloud
providers), you should purchase fixed outbound IP-address(es).</p>
<h3 id="13-testing">1.3 - Testing</h3>
<p>Before you can start testing you will need a client with registered callback URIs and a BankID test
user.</p>
<p>This can be created
at <a href="https://ra-preprod.bankidnorge.no/#/generate">https://ra-preprod.bankidnorge.no/#/generate</a>.
Generate an SSN and set the BankID type to netcentric. When you use this BankID with ID-porten for
the first time, you will be asked if you want to add additional info which you can skip.</p>
<p>In preprod (BankID TestBank) the one-time code is always <code>otp</code>, and the password is <code>qwer1234</code></p>
<p>Note: There will not be any loan information stored on the BankID test person you have created in
our test environment, so the debt API will not list any creditors.</p>
<p>Mocked debt data is available on several synthetic personal numbers: <code>14842249091</code> and <code>29868099311</code></p>
<h2 id="2-core-concepts">2 - Core concepts</h2>
<h3 id="21-oauth-20">2.1 - OAuth 2.0</h3>
<p>OAuth 2.0 is the industry-standard protocol for authorization. Giving an introduction to it is out
of scope of this documentation, but there are a lot of good sources out there. We recommend looking
at the <a href="https://oauth.net/2/">documentation</a>, and especially the list of community resources.</p>
<h3 id="22-access-token">2.2 - Access token</h3>
<p>Access tokens are opaque strings that represents the authorization of a specific application to
access specific parts of a user’s data. There is no information encoded in the token itself, but it
can be used to collect debt information from
the <a href="../openapi/#debt-api">debt API</a>.
<strong>Access tokens are sensitive.</strong> It is important that they are stored securely.</p>
<h3 id="23-flows">2.3 - Flows</h3>
<!-- Flows moved to: reference/index.md -->

<p>We are using two OAuth2.0 flows, Authorization Code and Client Credentials.</p>
<h4 id="231-authorization-code-flow">2.3.1 Authorization Code Flow</h4>
<p><a href="https://oauth.net/2/grant-types/authorization-code/">Authorization Code flow</a> is used to
authenticate a user and obtain a consent to share their debt information. It is initiated by
redirecting the users browser to our /auth endpoint with the required parameters in the URL.</p>
<h4 id="232-client-credentials-flow">2.3.2 Client Credentials Flow</h4>
<p>The <a href="https://oauth.net/2/grant-types/client-credentials/">Client Credentials flow</a> is used to obtain
an access token to identify the client when collecting debt information with a consent which was
granted for an extended duration.</p>
<p>The access token received on this request is used in addition to the id of the consent when querying
the debt API.</p>
<h3 id="24-scopes">2.4 - Scopes</h3>
<p>Scopes are space-separated lists of identifiers used to specify what access privileges are being
requested.</p>
<p>Due to legal reasons a consent is required to have a specific purpose; you can therefore only ask
the user to consent to one scope at a time.</p>
<p>The scopes also contain the purpose of the consent, which can either be presentation of debt
information (gjeldsinformasjonen) - or credit processing.</p>
<p>This is done by supplying the corresponding scope when you initiate the flow, and the request to
/auth must therefore contain one and only one of the following scopes:</p>
<table data-table-width="760" data-layout="default" data-local-id="665a77b0-ea6f-4be9-8a55-ab597da672c2" class="confluenceTable"><colgroup><col style="width: 230.0px;"><col style="width: 264.0px;"><col style="width: 142.0px;"><col style="width: 120.0px;"></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Scope</strong></p></td><td class="confluenceTd"><p><strong>Intended use</strong></p></td><td class="confluenceTd"><p><strong>Default duration</strong></p></td><td class="confluenceTd"><p><strong>Max duration</strong></p></td></tr><tr><td class="confluenceTd"><p>debt.unsecured.presentation</p></td><td class="confluenceTd"><p>Solely for displaying the debt info</p></td><td class="confluenceTd"><p>10 min</p></td><td class="confluenceTd"><p>365 days</p></td></tr><tr><td class="confluenceTd"><p>debt.unsecured.processing</p></td><td class="confluenceTd"><p>Credit processing, for example refinancing of existing debt</p></td><td class="confluenceTd"><p>10 min</p></td><td class="confluenceTd"><p>28 days</p></td></tr></tbody></table>

<p>A default consent allows you to collect the debt info one time within 10 minutes.</p>
<p>See section 2.5 for consents with an extended duration</p>
<p><strong>OPTIONAL:</strong></p>
<p>It is also possible to ask for the openid scope. This is used to contain the ssn and consentID of
the flow.</p>
<p>If you request the openid scope, it must be the last scope given in the request.<br />
Correct: “debt.unsecured.presentation openid”.<br />
Incorrect: “openid debt.unsecured.presentation”</p>
<table data-table-width="760" data-layout="default" data-local-id="48c8c426-5c7b-462a-9158-88489d33270d" class="confluenceTable"><colgroup><col style="width: 94.0px;"><col style="width: 421.0px;"><col style="width: 245.0px;"></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Scope</strong></p></td><td class="confluenceTd"><p><strong>Intended use</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td></tr><tr><td class="confluenceTd"><p>openid</p></td><td class="confluenceTd"><p>Receive consentID and ssn securely for verifying correct person has consented to share debt information.</p><p>Can be used to go directly to the Client Credentials Flow from the Authorization Code Flow by extracting the consentID from the ID Token.</p></td><td class="confluenceTd"><p>ID Token as a JWT-token with:<br>”pid”: &lt;ssn&gt;<br>and<br>”consent_id”: &lt;consentID&gt;</p><p>Note: The “sub” field should not be stored</p></td></tr></tbody></table>

<h3 id="25-consents-with-an-extended-duration">2.5 - Consents with an extended duration</h3>
<p>It is possible to ask the user for a consent with an extended duration. This is done by appending
the requested duration of the consent <strong>in days</strong> after the scope.</p>
<p>Starting the flow with the scope “debt.unsecured.presentation.365” would prompt the user to consent
to sharing their debt information for 365 days, which is the maximum duration for this type of
consent. Note that this is a way to specify duration. The scope name displayed in redirect URLs will
still be “debt.unsecured.presentation”.</p>
<p>The two scopes have different max numbers of days that you can request, and if provided a number
higher than this we will default to the boundary value.</p>
<p>It is possible to choose a shorter duration than the maximum duration if that is more suitable for
you, for example debt.unsecured.presentation.50 would prompt the user to consent to sharing their
debt information for 50 days.</p>
<p>The debt info can be collected any number of times using consents with an extended duration, but
keep in mind that users can log into <a href="http://www.norskgjeld.no">www.norskgjeld.no</a> and see every
single time their consent has been used to collect debt info.</p>
<h3 id="26-consents-created-and-managed-outside-nogi-eg-in-an-online-bank">2.6 - Consents created and managed outside NoGi (e.g. in an online bank)</h3>
<div class="puml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="223px" preserveAspectRatio="true" style="background: #ffffff" version="1.1" viewBox="0 0 442 223" width="442px" zoomAndPan="magnify"><defs/><g><g><title>AuthServer</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="262.4839" y="82.5625"/></g><g><title>SamtykkeSSO</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="375.0947" y="140.8281"/></g><g><title>ThirdParty</title><rect fill="#000000" fill-opacity="0.00000" height="151.6641" width="8" x="44.2544" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="48" x2="48" y1="36.2969" y2="187.9609"/></g><g><title>AuthServer</title><rect fill="#000000" fill-opacity="0.00000" height="151.6641" width="8" x="263.4839" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="267.1226" x2="267.1226" y1="36.2969" y2="187.9609"/></g><g><title>SamtykkeSSO</title><rect fill="#000000" fill-opacity="0.00000" height="151.6641" width="8" x="376.0947" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="379.8452" x2="379.8452" y1="36.2969" y2="187.9609"/></g><g class="participant participant-head" data-participant="ThirdParty"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.5088" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.5088" x="12" y="24.9951">ThirdParty</text></g><g class="participant participant-tail" data-participant="ThirdParty"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86.5088" x="5" y="186.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.5088" x="12" y="206.9561">ThirdParty</text></g><g class="participant participant-head" data-participant="AuthServer"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.7227" x="221.1226" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.7227" x="228.1226" y="24.9951">AuthServer</text></g><g class="participant participant-tail" data-participant="AuthServer"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.7227" x="221.1226" y="186.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.7227" x="228.1226" y="206.9561">AuthServer</text></g><g class="participant participant-head" data-participant="SamtykkeSSO"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.499" x="323.8452" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.499" x="330.8452" y="24.9951">SamtykkeSSO</text></g><g class="participant participant-tail" data-participant="SamtykkeSSO"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.499" x="323.8452" y="186.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.499" x="330.8452" y="206.9561">SamtykkeSSO</text></g><g><title>AuthServer</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="262.4839" y="82.5625"/></g><g><title>SamtykkeSSO</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="375.0947" y="140.8281"/></g><g class="message" data-participant-1="ThirdParty" data-participant-2="AuthServer"><polygon fill="#181818" points="250.4839,78.5625,260.4839,82.5625,250.4839,86.5625,254.4839,82.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.2544" x2="256.4839" y1="82.5625" y2="82.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="55.2544" y="69.9302">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.0518" x="68.2998" y="62.3638">/auth?clientID&amp;clientSecret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.251" x="68.2998" y="77.4966">(scope="consent.create")</text></g><g class="message" data-participant-1="AuthServer" data-participant-2="ThirdParty"><polygon fill="#181818" points="59.2544,107.6953,49.2544,111.6953,59.2544,115.6953,55.2544,111.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.2544" x2="266.4839" y1="111.6953" y2="111.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="65.2544" y="106.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.3921" x="78.2998" y="106.6294">AccessToken</text></g><g class="message" data-participant-1="ThirdParty" data-participant-2="SamtykkeSSO"><polygon fill="#181818" points="363.0947,136.8281,373.0947,140.8281,363.0947,144.8281,367.0947,140.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.2544" x2="369.0947" y1="140.8281" y2="140.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="55.2544" y="135.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.0615" x="68.2998" y="135.7622">Create consent</text></g><g class="message" data-participant-1="SamtykkeSSO" data-participant-2="ThirdParty"><polygon fill="#181818" points="59.2544,165.9609,49.2544,169.9609,59.2544,173.9609,55.2544,169.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.2544" x2="379.0947" y1="169.9609" y2="169.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="65.2544" y="164.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.292" x="78.2998" y="164.895">consentID</text></g></g></svg></div>

<p>Consents can also be captured and managed in your own system, and only "registered" in NoGi.
In order to be able to use this feature, you must conform to the rules and regulations
for this functionality, and sign an agreement up-front.</p>
<p>After you have gathered the consent from the enduser, you will register the consent (and its scope)
at NoGi. Before you can register the new consent, you must first fetch new access token using 
<a href="#343-client-credentials-flow">3.4.3 - Client Credentials Flow</a> with scope set to <code>consent.create</code>.</p>
<p>The access token is then used to call the <a href="../openapi/#operations-samtykke-avtale-controller-createConsent">PUT - /v1/consent/agreement endpoint</a>
to register the consent from the enduser at NOGI. The <code>scope_of_consent</code>, described in API documentation for
<a href="../openapi/#operations-samtykke-avtale-controller-createConsent">PUT - /v1/consent/agreement endpoint</a>, is the same type of Scope described in
<a href="#24-scopes">2.4 - Scopes</a>. This will return the NOGI generated consentId (<code>consent.id</code> in response).</p>
<p>You can then fetch debt by getting an access token using client credentials flow (see
<a href="#343-client-credentials-flow">3.4.3 - Client Credentials Flow</a>), and then fetch debt as described in
<a href="#4-collect-debt-info-api">4 - Collect Debt Info API</a></p>
<h4 id="example-implementation">Example implementation</h4>
<p>There is an example implementation in python of how to create and fetch debt using contract based 
consents here: <a href="../assets/create-agreementbased.py">create-agreementbased.py</a>. Remember to replace the values of the variables in the script:</p>
<p><div class="highlight"><pre><span></span><code><span class="n">client_id</span> <span class="o">=</span> <span class="s1">&#39;&lt;your-client-id&gt;&#39;</span>
<span class="n">client_secret</span> <span class="o">=</span> <span class="s1">&#39;&lt;your-client-secret&gt;&#39;</span>
</code></pre></div>
with your own client information.</p>
<h2 id="3-integration">3 - Integration</h2>
<p>The Consent API is compliant with the OAuth2.0 standard. We therefore strongly recommend that you
use a client library to perform this part of the integration.</p>
<p>A good place to start is to
search <a href="https://openid.net/developers/certified/">the list of clients certified by the OpenID foundation</a>
for a client written in your programming language.</p>
<h3 id="31-base-urls">3.1 - Base Urls</h3>
<table data-table-width="760" data-layout="default" data-local-id="158cd79e-8d3d-488f-81a6-e4fee63898be" class="confluenceTable"><colgroup><col style="width: 473.0px;"><col style="width: 287.0px;"></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Environment</strong></p></td><td class="confluenceTd"><p><strong>Base URL</strong></p></td></tr><tr><td class="confluenceTd"><p>Preprod</p></td><td class="confluenceTd"><p>https://access-preprod.norskgjeld.no</p></td></tr><tr><td class="confluenceTd"><p>Prod</p></td><td class="confluenceTd"><p>https://access.norskgjeld.no</p></td></tr></tbody></table>

<h3 id="32-well-knownopenid-configuration">3.2 - /.well-known/openid-configuration</h3>
<p>The OpenID-configuration returns metadata which can be used to configure your client library.</p>
<p><em><strong>Example request</strong></em></p>
<div class="highlight"><pre><span></span><code>GET:https://access-preprod.norskgjeld.no/.well-known/openid-configuration
</code></pre></div>
<p><em><strong>Example</strong></em> <em><strong>response</strong></em></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;issuer&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;authorization_endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/oauth2/auth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;token_endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/oauth2/token&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jwks_uri&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/.well-known/jwks.json&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;subject_types_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;pairwise&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;response_types_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;code&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;claims_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;sub&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;grant_types_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;authorization_code&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;client_credentials&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;response_modes_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;query&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;fragment&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;userinfo_endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/userinfo&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;scopes_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;openid&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;token_endpoint_auth_methods_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;client_secret_basic&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;userinfo_signing_alg_values_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;RS256&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;id_token_signing_alg_values_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;RS256&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;request_parameter_supported&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;request_uri_parameter_supported&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;require_request_uri_registration&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;claims_parameter_supported&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;revocation_endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/oauth2/revoke&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;end_session_endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://access-preprod.norskgjeld.no/oauth2/sessions/logout&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;request_object_signing_alg_values_supported&quot;</span><span class="p">:[</span>
<span class="w">      </span><span class="s2">&quot;RS256&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;none&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="33-oauth2auth">3.3 - /oauth2/auth</h3>
<p>The auth endpoint is the starting point for the OAuth2.0 Authorization code flow. This request
authenticates the user and returns a code on the callback which can be exchanged for an access token
towards the /token endpoint.</p>
<p>It is important that you show the user some kind of confirmation that the consent has been received
on the callback. This could for example be a landing page if you intend to redirect the user to
another service.</p>
<table data-table-width="760" data-layout="default" data-local-id="8639edb0-900e-49c7-99ab-70b78fca03b8" class="confluenceTable"><colgroup><col style="width: 135.0px;"><col style="width: 485.0px;"><col style="width: 140.0px;"></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Parameter</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td><td class="confluenceTd"><p><strong>Required</strong></p></td></tr><tr><td class="confluenceTd"><p>client_id</p></td><td class="confluenceTd"><p>client id received from Norsk Gjeldsinformasjon</p></td><td class="confluenceTd"><p>yes</p></td></tr><tr><td class="confluenceTd"><p>response_type</p></td><td class="confluenceTd"><p>Must be set to "code"</p></td><td class="confluenceTd"><p>yes</p></td></tr><tr><td class="confluenceTd"><p>scope</p></td><td class="confluenceTd"><p>Must contain one and only one debt-related scope. It may optionally contain the “openid” scope</p></td><td class="confluenceTd"><p>yes</p></td></tr><tr><td class="confluenceTd"><p>redirect_uri</p></td><td class="confluenceTd"><p>Whitelisted URI where the user will be redirected after consenting</p></td><td class="confluenceTd"><p>yes</p></td></tr><tr><td class="confluenceTd"><p>state</p></td><td class="confluenceTd"><p>This is mirrored back in the callback request. Should be set to a random value for each request</p></td><td class="confluenceTd"><p>yes</p></td></tr></tbody></table>

<p><em><strong>Example request:</strong></em></p>
<div class="highlight"><pre><span></span><code>GET:https://access-preprod.norskgjeld.no/oauth2/auth?client_id=your_client_id_here&amp;response_type=code&amp;scope=debt.unsecured.presentation&amp;state=thisShouldBeARandomValue&amp;redirect_uri=https://api-eksempelbank.no/v1/callback
</code></pre></div>
<p><em><strong>Example response:</strong></em></p>
<div class="highlight"><pre><span></span><code>Success response:
https://api-eksempelbank.no/v1/callback?code=wi-w8zIdwwBHggkHhSjR24wH8pN6MDqxdObTBDuzaZo.sciTzz9qgwMlGBZ6X0jYIDyib8MupoIp5gbIJBxnTCs&amp;scope=debt.unsecured.presentation&amp;state=thisShouldBeARandomValue

Error response:
https://api-eksempelbank.no/v1/callback?error=consent_denied&amp;error_description=&amp;state=thisShouldBeARandomValue
</code></pre></div>
<p>The error code can be "consent_denied", "server_error", "invalid_scopes" or "login_cancelled"</p>
<h3 id="34-token">3.4 - /token</h3>
<p>The token endpoint is used to obtain an access token which is used when collecting debt information
from the debt-API. This can either be completed with the code received on the callback after the
user has finished delivering their consent (Authorization Code Flow) , or the client can identify
directly with their credentials to obtain an access token directly (Client Credentials Flow).</p>
<h4 id="341-authentication">3.4.1 - Authentication</h4>
<p>When calling the token endpoint you have to identify yourself. This is done by supplying your client
id and client secret in the Authorization header using
the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication#basic_authentication_scheme">Basic authentication scheme</a>.</p>
<h4 id="342-authorization-code-flow">3.4.2 - Authorization Code Flow</h4>
<p>When requesting an access token using authorization code flow the following parameters have to be
present in the body which should be of type application/x-www-form-urlencoded</p>
<table data-table-width="760" data-layout="default" data-local-id="eb2fd1e6-f278-4d26-8cab-70532b025f51" class="confluenceTable"><colgroup><col style="width: 340.0px;"><col style="width: 340.0px;"></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Parameter</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td></tr><tr><td class="confluenceTd"><p>grant_type</p></td><td class="confluenceTd"><p>Must be set to “authorization_code”</p></td></tr><tr><td class="confluenceTd"><p>client_id</p></td><td class="confluenceTd"><p>Client id received from Norsk Gjeldsinformasjon</p></td></tr><tr><td class="confluenceTd"><p>redirect_uri</p></td><td class="confluenceTd"><p>Whitelisted URI where the user will be redirected after consenting</p></td></tr><tr><td class="confluenceTd"><p>code</p></td><td class="confluenceTd"><p>Authorization received on the authorization callback</p></td></tr></tbody></table>

<p><em><strong>Example request</strong></em></p>
<div class="highlight"><pre><span></span><code>POST:https://access-preprod.norskgjeld.no/oauth2/token
</code></pre></div>
<p>HEADERS and BODY as described above.</p>
<p><em><strong>Example response</strong></em>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="s2">&quot;YcvXKoiuOwnbJkxso2Oe6bhp2cXcoHdZ1pdgE_QpDww.cAu8_J51evXtBQxfTMzkRA414_mOla1zryE1e_-r-1k&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;expires_in&quot;</span><span class="p">:</span><span class="mi">3599</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;scope&quot;</span><span class="p">:</span><span class="s2">&quot;debt.unsecured.presentation&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="s2">&quot;bearer&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="343-client-credentials-flow">3.4.3 - Client Credentials Flow</h4>
<p>When requesting an access token using the client credential flow the following parameters have to be
present in the body which should be of type application/x-www-form-urlencoded</p>
<table data-table-width="760" data-layout="default" data-local-id="e3b0d4ad-923a-4206-bfe9-597394e5d2a3" class="confluenceTable"><colgroup><col style="width: 340.0px;"><col style="width: 340.0px;"></colgroup><tbody><tr><td class="confluenceTd"><p><strong>Parameter</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td></tr><tr><td class="confluenceTd"><p>grant_type</p></td><td class="confluenceTd"><p>Must be set to “client_credentials”</p></td></tr><tr><td class="confluenceTd"><p>audience</p></td><td class="confluenceTd"><p>Must be set to "<a class="external-link" href="https://api.norskgjeld.no/v1/debt" rel="nofollow">https://api.norskgjeld.no/v1/debt</a>” in prod and “<a href="#" rel="nofollow">https://api-preprod.norskgjeld.no/v1/debt”</a> in preprod</p></td></tr><tr><td class="confluenceTd"><p>scope</p></td><td class="confluenceTd"><p>Must contain a space separated string with the scopes that you are going to fetch debt information for. It should usually be set to:&nbsp;</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">debt.unsecured.presentation debt.unsecured.processing</pre></div></div></td></tr></tbody></table>

<p><em><strong>Example request</strong></em></p>
<div class="highlight"><pre><span></span><code>POST:https://access-preprod.norskgjeld.no/oauth2/token
</code></pre></div>
<p>HEADERS and BODY as described above.</p>
<p><em><strong>Example response</strong></em></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;access_token&quot;</span><span class="p">:</span><span class="s2">&quot;C2EzneyuE2lEK8VBYZS7TxBUMF16Ns6gTuU5DybZbY.6pcF_rv3muje47_GDucYJrQZvDioc8O7oCmvKMZKHEg&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;expires_in&quot;</span><span class="p">:</span><span class="mi">3599</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;scope&quot;</span><span class="p">:</span><span class="s2">&quot;debt.unsecured.presentation debt.unsecured.processing&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;token_type&quot;</span><span class="p">:</span><span class="s2">&quot;bearer&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="4-collect-debt-info-api">4 - Collect Debt Info API</h2>
<p>After you have received an access token from the Authorization server you can use it to collect the
debt information from the API which is
documented <a href="../openapi/#operations-tag-Debt_Api">here</a>.</p>
<h2 id="5-read-updates-about-consents">5 - Read updates about consents</h2>
<p>Updates to consents are available as a feed for customers of the consent service.</p>
<p>This service can be used to "subscribe" to changes instead of checking the status of each individual consent you have registered.</p>
<p>This log will show the last 7 days of events for alle consents given to you.</p>
<p>You will need to use an access token with scope="client.access.consent.events" and audience set to "https://api-preprod.norskgjeld.no/feed/v1/consent" (for preprod) or "https://api.norskgjeld.no/feed/v1/consent" (for production) when calling this API.</p>
<p>NOTE: The sequence numbers you receive will not necessarily correlate to the time a change happened.
You must check the timestamps inside the events if you need to order them by when they happened.
Sequence number 3 might contain an event that occurred <em>after</em> sequence number 4.</p>
<p>NOTE: The sequence numbers are not guaranteed to be contiguous. You might receive a response containing {seq. nr: 7, seq. nr: 8, seq. nr: 13}.\
The sequence numbers 9-12 are not missing.</p>
<p>The API is defined <a href="../openapi/#operations-tag-Consents_Feed_API">here</a>.</p>
<h3 id="51-example-implementation">5.1 Example implementation</h3>
<p>An example implementation of fetching updates to consents in python can be found <a href="../assets/fetch-feed.py">here</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
    
  </body>
</html>